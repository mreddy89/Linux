# Make Linux /etc/resolv.conf DNS entries persistent in RHEL 7.x, SUSE 11&12, Ubuntu, CentOS 7.x
This blog post explains about steps by step configurations of making DNS entries persistent using the /etc/resolv.conf file, With the new versions of Linux Operating Systems we have observed that /etc/resolv.conf is no more manually editable and is maintained by NetworkManager and or netconfig.  This blog explains about the steps for taking over control of /etc/resolv.conf file with different flavors and version of Linux.  Follow these steps to make DNS entries persistent on your linux operating system.

#   Steps to make DNS Entry persistent in RedHat Enterprise Linux Server 7.7/7.8 & CentOS 7.7/7.8

   1.  Edit the file /etc/NetworkManager/NetworkManager.conf and add the entry dns=none just after the [main] line in the file

	Final output should be looking like :-
       	...
	      [main]
	      dns=none
 	      #plugins=ifcfg-rh,ibft
	      ...
   2.  Save the file and Exit
   3.  Make DNS server entries according to your requirements into the /etc/resolv.conf file
   
	nameserver 8.8.8.8
	nameserver 8.8.4.4

   4.  Save the file and Exit
   5.  Reboot the server once and check if DNS entries are persist post reboot

# Steps to make DNS Entry persistent in SUSE Linux Enterprise Server 11 SP4 and SUSE 12 SP4

   1.  You can disable netconfigâ€™s handling of /etc/resolv.conf by disabling the NETCONFIG_DNS_POLICY option in /etc/sysconfig/network/config in SUSE OS
   2.  Open the file /etc/sysconfig/network/config and make sure NETCONFIG_DNS_POLICY="" is set to empty, The default value will be NETCONFIG_DNS_POLICY="auto"
   3.  Save the file and Exit
   4.  You should delete the netconfig-generated /etc/resolv.conf file
   5.  Reboot the server to make sure /etc/resolv.conf is not generated by netconfig
   6.  Recreating /etc/resolv.conf file, You now need to create a world-readable (permission 644) /etc/resolv.conf and add some nameservers to it, with nameserver entries you wish to be persist in server

	nameserver 8.8.8.8
	nameserver 8.8.4.4

# Steps to make DNS Entry persistent in Ubuntu 14.04 and Ubuntu 16.04

   1.  cat the file /etc/resolvconf/resolv.conf.d/head and expect the following output

     # Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)
     #     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN

   2.  Edit the file /etc/resolvconf/resolv.conf.d/head and add an entries of DNS nameservers you wish to have in /etc/resolv.conf file

	nameserver 8.8.8.8
	nameserver 8.8.4.4
  
   3.  This is an workaround to make the DNS server entries into the resolv.conf file
   4.  Try to reboot the server and check, /etc/resolvconf/resolv.conf.d/head script will create the entries each time when system is rebooted

